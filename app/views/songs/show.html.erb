<div class="row">
	<!--レイアウト用-->
	<div class="col-lg-3">
		<%= render "users/sidebar", user: current_user %>
	</div>
	<!--レイアウト用-->

	<!--投稿詳細-->
	<div class="col-lg-9 card-list">
		<div class="card">
			<div class="card-img-top">
				<%= attachment_image_tag @song, :image, :fill, 100, 60, fallback: "no_image_song.jpg", size: "200x120" %>
			</div>
			<div class="card-body">
				<h2 class="card-title">
					<span style="font-size: 40px">♪ </span> <%= @song.title %>
					<% if @song.user.id == current_user.id %>
						<%= link_to "編集する", edit_song_path(@song.id), class: "btn btn-success" %>
					<% end %>
				</h2>
				<div class="card-subtitle">
					<strong>アーティスト名</strong>：<%= @song.artist_name %>
				</div>
				<div class="card-text">
					<strong>本文</strong>：<%= @song.body %>
				</div>
				<div class="card-footer">

					<strong>投稿者</strong>：<%= link_to "#{@song.user.name}", user_path(@song.user.id) %>

					<!--いいね機能-->
					<div id="favorite">
						<%= render "favorites/favorite_button", song: @song %>
					</div>
					
				</div>
			</div>
		</div>
		<!--投稿詳細-->
		<!--コメント機能-->
		<div class="comment-list">
			<h4 class="comment-title">コメント一覧</h4>
			<% if @comments.exists? %>
				<table class="table">
					<tbody>
						<% @comments.each do |comment| %>
							<tr>
								<td width="30%">
									<%= link_to comment.user do %>
										<%= attachment_image_tag comment.user, :profile_image_id, :fill, 50, 50, fallback: "no_image_song.jpg", size: "50x50" %>
										<%= comment.user.name %>
									<% end %>
								</td>
								<td width="60%">
									<%= comment.comment %>
								</td>

								<% if comment.user == current_user %>
									<td width="10%">
										<%= link_to "削除", song_comment_path(comment.song, comment), method: :delete, "data-confirm" => "本当に削除しますか？", class: "btn btn-danger btn-sm" %>
									</td>
								<% end %>
							</tr>
						<% end %>
					</tbody>
				</table>
			<% else %>
				<p>まだコメントはありません。</p>
			<% end %>
			
			<div class="comment-container">
				<%= form_for [@song, @comment] do |f| %>
					<div class="comment-form">
						<%= f.text_area :comment, class: "text-area" %>
					</div>
					<div class="comment-form comment-btn">
						<%= f.submit "送信", class: "btn btn-primary" %>
					</div>
				<% end %>
			</div>
		</div>
		<!--コメント機能-->
	</div>
		
</div>





